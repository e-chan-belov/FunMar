# FunMar
Функциональный язык программирования, основанный на [нормальных алгорифмах Маркова](https://ru.wikipedia.org/wiki/Нормальный_алгоритм)

**Версия:** 0.8.5

<!--Установка-->
## Установка (MacOS)
У Вас должны быть установлены [зависимости проекта](https://github.com/e-chan-belov/FunMar.git#Зависимости)

1. Клонирование репозитория

```git clone https://github.com/e-chan-belov/FunMar.git```

2. Переход в директорию

```cd MacOS```

3. Загрузка Вашего файла программы на FunMar в папку input в текущей директории. Программа должна называться main.fm

4. Создание папки build

```mkdir build```

5. Переход в папку build

```cd build```

6. Сбор компилятора FunMar

```cmake .. && make```

7. Компиляция и запуск Вашей программы

```./main```

<!--Пользовательская документация-->
## Документация
**FunMar** — это функциональный, Си-подобный язык программирования, вдохновлённый мощью алгорифмов Маркова и замешанный на выразительной простоте.

**Расширение файлов:** .fm

Основная идея языка программирования FunMar заключается в применение изменений над словами согласно заданным в программе правилам.
Правила состоят из входной и выходной абстракции, в которых описываются переменные и вызовы функций.

**Входная абстракция** - это шаблон слова, под который находится первое вхождение в обрабатываемом слове слева. 
Представляет из себя чередования подстрок и переменных. Если в слове существует подстрока, 
которой подходит входная абстракция, то считается, что к слову применимо правило.

Пример:

Абстракция ```"b" value1 "c" value2 "d"``` применима к слову "a20b30c40d50f" и будет реализована на месте "b30c40d",
а в переменные value1 и value2 будут записаны 30 и 40.

**Выходная абстракция** - это шаблон слова, согласно которому происходит формирования слова и вставка его 
в обрабатываемого слова, на место, подходящее под входную абстракцию. Представляет из себя набор из подстрок,
переменных и функций, принимающие на вход набор из подстрок и переменных. При применение правила происходит
реализации выходной абстракции через замену переменных согласно тому, как они были объявлены в выходной абстракции и
вызовы функций, которые возвращают подстроки, встраивыемые в выходную абстракцию на месте соответствующей функции.
После реализации обрабатываемое подстрока, соответствующая входной абстракции, в обрабатываемом слове меняется на реализацию 
выходной абстракции.

Пример:

Абстракция ```f("abc" value2 value3) "de" value1 value2```, где value1, value2, value3 это переменные, а f() это вызов функции,
который при выполнение правила будет заменён на результат работы функции.

**Правило** - это формулы подстановки, которые использует программа при работе над словом. Состоит из входной абстракции и 
выходной абстракции. Программа ищет в слове первую слева подстроку по входной абстракции и в случае нахождения меняет эту
подстроку на слово, формируемое в выходной абстракции. 

```Входная абстракция -> Выходная абстракция;```

Правило может быть терминальным ```=>```. В этом случае в случае выполнения правила функция (или схема, если правило
находится в схеме) завершается немедленно.

Пример:

```"b" value1 "c" value2 "d"" -> f("abc" value2 value1) "de" value1 value2;```

Любая программа на языке FunMar состоит из **набора функций**. Обязательно в программе должна быть функция main.

```Название функции { тело функции }```

Пример:

```
func1 {
    // тело функции
}

func2 {
    // тело функции
}

main {
    // тело функции
}
```

Тело функции состоит из набора правил и схем.

**Схема** - это набор правил, применяемых по принципу нормальных алгорифмом Маркова. Программа проходится по схеме и пытается применить правила над словом
из неё. Если правило применяется, то обход схемы начинается сначала. Если правило не применимо, то программа смотрит следующее правило. 
В случае невозможности применения ни одного правила из схемы программа выходит из схемы.

```scheme { набор правил };```

В примере приведена схема, которая производит побитовое отрицание:

```
scheme {
    "a0" -> "1a";
    "a1" -> "0a;
};
```

При запуске языка программирования ваша программа скомпилируется, и от вас будет запрошено на вход слово.
В ответ вы получите результат работы вашей программы над словом.

В качестве примера в директории input приведена программа mallocZeroes, которая принимает на вход массив из чисел 
(массив здесь это перечисление через запятую без пробелов, например ```2,3,4,5```) и в качестве ответа выдаёт
массив, в каждой ячейке которого некое количество нулей, и это количество равно соответствующему числу в ячейке входного массива.

То есть ```2,3``` превратится в ```00,000```.

<!--Зависимости-->
## Зависимости
Язык программирования FunMar использует Antlr4, C++ и CMake.

Убедитесь, что у Вас установлен Antlr.

**Для MacOS:** 

```brew install antlr```
